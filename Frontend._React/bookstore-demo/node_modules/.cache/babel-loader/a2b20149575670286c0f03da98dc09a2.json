{"ast":null,"code":"var _jsxFileName = \"D:\\\\RS2\\\\bookstore-demo\\\\src\\\\context\\\\cart.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport React from \"react\";\nimport cartService from \"../service/cart.service\";\nimport { useAuthContext } from \"./auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  cartData: {\n    records: [],\n    totalRecords: 0\n  },\n  updateCart: () => {},\n  emptyCart: () => {}\n};\nexport const CartContext = /*#__PURE__*/createContext(initialState);\nexport const CartWrapper = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const authContext = useAuthContext();\n  const [cartData, setCartData] = useState({\n    totalRecords: 0,\n    records: []\n  });\n  useEffect(() => {\n    updateCart();\n  }, [authContext.user.id]);\n\n  const updateCart = () => {\n    if (authContext.user.id) {\n      cartService.getList(authContext.user.id).then(res => setCartData(res));\n    }\n  };\n\n  const emptyCart = () => {\n    setCartData({\n      totalRecords: 0,\n      records: []\n    });\n  };\n\n  let value = {\n    cartData,\n    updateCart,\n    emptyCart\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CartWrapper, \"OeCFxwMN4W1mVtdwEhcwdgoFiG0=\", false, function () {\n  return [useAuthContext];\n});\n\n_c = CartWrapper;\nexport const useCartContext = () => {\n  _s2();\n\n  return useContext(CartContext);\n};\n\n_s2(useCartContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"CartWrapper\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","React","cartService","useAuthContext","initialState","cartData","records","totalRecords","updateCart","emptyCart","CartContext","CartWrapper","children","authContext","setCartData","user","id","getList","then","res","value","useCartContext"],"sources":["D:/RS2/bookstore-demo/src/context/cart.tsx"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport React from \"react\";\r\nimport Shared from \"../utils/shared\";\r\nimport { RoutePaths } from \"../utils/enum\";\r\nimport UserModel from \"../models/UserModel\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { CartList, GetCart } from \"../models/CartModel\";\r\nimport cartService from \"../service/cart.service\";\r\nimport { AuthContextModel, useAuthContext } from \"./auth\";\r\n\r\nexport interface CartContextModel {\r\n\tcartData: GetCart;\r\n\tupdateCart: () => void;\r\n\temptyCart: () => void;\r\n}\r\n\r\nconst initialState: CartContextModel = {\r\n\tcartData: {\r\n\t\trecords: [],\r\n\t\ttotalRecords: 0,\r\n\t},\r\n\tupdateCart: () => {},\r\n\temptyCart: () => {},\r\n};\r\n\r\nexport const CartContext = createContext(initialState);\r\n\r\nexport const CartWrapper: React.FC<React.PropsWithChildren<{}>> = ({\r\n\tchildren,\r\n}: React.PropsWithChildren<{}>) => {\r\n\tconst authContext: AuthContextModel = useAuthContext();\r\n\r\n\tconst [cartData, setCartData] = useState<GetCart>({\r\n\t\ttotalRecords: 0,\r\n\t\trecords: [],\r\n\t});\r\n\tuseEffect(() => {\r\n\t\tupdateCart();\r\n\t}, [authContext.user.id]);\r\n\r\n\tconst updateCart = () => {\r\n\t\tif (authContext.user.id) {\r\n\t\t\tcartService.getList(authContext.user.id).then((res) => setCartData(res));\r\n\t\t}\r\n\t};\r\n\tconst emptyCart = () => {\r\n\t\tsetCartData({\r\n\t\t\ttotalRecords: 0,\r\n\t\t\trecords: [],\r\n\t\t});\r\n\t};\r\n\tlet value = {\r\n\t\tcartData,\r\n\t\tupdateCart,\r\n\t\temptyCart,\r\n\t};\r\n\treturn <CartContext.Provider value={value}>{children}</CartContext.Provider>;\r\n};\r\n\r\nexport const useCartContext = () => {\r\n\treturn useContext(CartContext);\r\n};"],"mappings":";;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,SAApC,EAA+CC,QAA/C,QAA+D,OAA/D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAOA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAA2BC,cAA3B,QAAiD,QAAjD;;AAQA,MAAMC,YAA8B,GAAG;EACtCC,QAAQ,EAAE;IACTC,OAAO,EAAE,EADA;IAETC,YAAY,EAAE;EAFL,CAD4B;EAKtCC,UAAU,EAAE,MAAM,CAAE,CALkB;EAMtCC,SAAS,EAAE,MAAM,CAAE;AANmB,CAAvC;AASA,OAAO,MAAMC,WAAW,gBAAGb,aAAa,CAACO,YAAD,CAAjC;AAEP,OAAO,MAAMO,WAAkD,GAAG,QAE/B;EAAA;;EAAA,IAFgC;IAClEC;EADkE,CAEhC;EAClC,MAAMC,WAA6B,GAAGV,cAAc,EAApD;EAEA,MAAM,CAACE,QAAD,EAAWS,WAAX,IAA0Bd,QAAQ,CAAU;IACjDO,YAAY,EAAE,CADmC;IAEjDD,OAAO,EAAE;EAFwC,CAAV,CAAxC;EAIAP,SAAS,CAAC,MAAM;IACfS,UAAU;EACV,CAFQ,EAEN,CAACK,WAAW,CAACE,IAAZ,CAAiBC,EAAlB,CAFM,CAAT;;EAIA,MAAMR,UAAU,GAAG,MAAM;IACxB,IAAIK,WAAW,CAACE,IAAZ,CAAiBC,EAArB,EAAyB;MACxBd,WAAW,CAACe,OAAZ,CAAoBJ,WAAW,CAACE,IAAZ,CAAiBC,EAArC,EAAyCE,IAAzC,CAA+CC,GAAD,IAASL,WAAW,CAACK,GAAD,CAAlE;IACA;EACD,CAJD;;EAKA,MAAMV,SAAS,GAAG,MAAM;IACvBK,WAAW,CAAC;MACXP,YAAY,EAAE,CADH;MAEXD,OAAO,EAAE;IAFE,CAAD,CAAX;EAIA,CALD;;EAMA,IAAIc,KAAK,GAAG;IACXf,QADW;IAEXG,UAFW;IAGXC;EAHW,CAAZ;EAKA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEW,KAA7B;IAAA,UAAqCR;EAArC;IAAA;IAAA;IAAA;EAAA,QAAP;AACA,CA9BM;;GAAMD,W;UAG0BR,c;;;KAH1BQ,W;AAgCb,OAAO,MAAMU,cAAc,GAAG,MAAM;EAAA;;EACnC,OAAOvB,UAAU,CAACY,WAAD,CAAjB;AACA,CAFM;;IAAMW,c"},"metadata":{},"sourceType":"module"}